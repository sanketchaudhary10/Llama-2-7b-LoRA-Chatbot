from nltk.translate.bleu_score import corpus_bleu
from rouge_score import rouge_scorer

# Example entries for the test dataset
references = [
    ["i'm sorry to hear that you are feeling as if you're in a slump. first of all, nothing is wrong with you. many people report similar symptoms. have you ever talked with a physician regarding your symptoms? two extreme emotions such as feeling extremely happy and then feeling extremely low for a length of time may indicate a mood disorder. i think it would be best to talk with your doctor or a therapist to help pinpoint the issue causing them. it's possible that it could just be certain stressors in your life that are causing the two extremities but you definitely want to rule out any mental health issues. if it is in fact mental health related there are many medications or therapy choices that can help and thanks for reaching out! i hope that you will feel back on track soon!"],
    ["in general, the answer is no. depression can not not generally cause ptsd your question does make a lot of sense, though. depression is a common symptom of ptsd.a counselor in your area should be able to help you what's going on - either feelings of depression, ptsd, or both."],
    ["frequently when working with clients, i utilize the a-b-c model developed by albert ellis, the founder of rational emotive behavior theory. the theory basically states that you can not control an event but you can control your reaction to the emotions associated with said event. for instance here is an example: a (action or event): you need to talk to someone and that person is not calling you back b (behavior or response): you begin to tell yourself that this person is too busy for me or i am not important to this person c (consequence): you feel depressed.if you look at the model, b has a direct effect on c. the thought is if you change your reaction to a, then c will have a better consequence, such as a: stays the same b (this is what you change): this person must be busy, they will call me back when they get a chance or i can call someone else to lean on for support until this person is available: decreased feelings of depression overall functioning improves.this is just an example but if you actively work to replace the negative thought patterns that effect your behavior, studies show that your overall outlook and mood will improve. if this model resonates with you, i recommend feeling better, getting better, staying better and by alber ellis. in addition, looking for support groups in your area are a great source of support when you are feeling abandoned or alone."],
    ["what you are describing is something psychologists have termed triangulation which is what happens when one family member will not talk to the one they have a problem with and goes to a third member of the family to complain instead. you have been triangulated by your wife and mother.this is often seen in families. it's seen everywhere. how many times have you had a problem with someone but you didn't go to them to tell them, you went to someone else to complain? it is usually difficult for a person to confront another, especially in relationships where there is a power differential. for example, i bet it's easier to complain to a coworker about your boss rather than go to the boss with your complaint.i'm not saying triangulation is always a bad thing. sometimes a third party mediator is needed to help solve problems between two people who disagree. that's what therapists do every day! sometimes just getting someone else's perspective can help you see the issue clearer. however, in your situation it sounds like this is becoming a problem. you are stuck in the middle between two people that love you and that you love if you want to put a stop to this triangulation, you will need to encourage the two of them to talk to each other and work out their differences. perhaps it was a simple misunderstanding that some open communication can clear up. even if they really don't like each other and can't get along, your relationship with the both of them is going to continue to deteriorate the longer you are stuck in the middle and try to understand what might be the feelings behind their behavior. it is possible that they may both feel threatened by the other. these are the two most important women in your life and they both know it. your mother may be afraid that she will lose you if she confronts your wife. i heard one mother-in-law describe her son's wife as the gateway to her son. the wife has the power to dictate when and how often the mother gets to see her son. the wife also is the gateway to the grandchildren. if your wife doesn't like her mother-in-law she can severely hamper or damage her mother-in-law's relationship with you and any children you two may have. from your wife's viewpoint, this is the woman that she may feel like she can never live up to. if you regularly praise your mom's cooking, her housework, gardening, or anything else your wife may feel that you are putting down her own efforts in these areas and can feel unappreciated. this can be especially difficult if your wife and mother are nothing alike. i am not saying that this is the case with your family's situation. these are just a few examples from other families in a similar situation as yours and regardless of what the cause is, if this dysfunctional pattern is allowed to continue, your mom and your wife will begin to get upset with you when you don't agree with them. they will get upset if you don't align yourself with them against the other. they will be offended when it seems like you are choosing the other one's side or that you are not standing up for them like they think you should. in worst cases, if it continues to escalate you may even find yourself in the impossible position of having to choose between your wife and your mother which may mean cutting off contact with the other, ending that relationship. change the dynamics before it spirals even further."],
    ["i'm sorry you are feeling uncared for. i'm sure there are plenty of people that care and love for you that you are not taking into consideration. sometimes when we get upset we may think irrationally and see the world as all or nothing. however, take a deep breath, relax and start focusing on the positive relationships you have with others, regardless of how small or insignificant they may seem. i think you will quickly realize there are people out there that care a great deal about you i also think it would help for you to surround yourself among people who you can identify with and share common interests with. maybe you can attend a religious service, join an interest group (i.e. reading club, sports group, etc.) or start a group of your own. most importantly, you need to tap into your interests and surround yourself with things that are beneficial for your own mental and physical health. from this, relationships will start to immerse and you may also like to talk with a therapist regarding your feelings of being unloved. this is an unhealthy way to think of yourself and i think with a little help, you can see that you are more than deserving of a great relationship.thanks for reaching out and i wish you the best of luck moving forward."],
]

# Corresponding generated responses
generated_responses = [
    "It sounds like you're struggling with some pretty intense feelings of sadness and hopelessness. It's important to remember that you're not alone in this feeling, and that it's okay to feel this way sometimes. It's normal to experience ups and downs in life, and it's okay if things don't always feel great. It's important to remember that you're not alone in this feeling, and that it's okay to feel this way sometimes. It's normal to experience ups and downs in life, and it's okay if things don 't always feel great. It sounds like you're feeling pretty disconnected from your friends, and that's okay too. Sometimes, when we're feeling down, we don't feel like being around other people. That's okay. It's important to take care of yourself, and to do what feels right for you. Maybe you can try reaching out to a trusted friend or family member, and talk to them about how you're feeling. Sometimes, just talking to someone can help us feel better.It's also important to remember that things can get better. It's okay if you're feeling down right now, but things can get better. You can start to feel better, and things can get better. I t's important to take things one step at a time, and to be kind to yourself. You're doing the best you can, and that's something to be proud of.I hope this helps. Remember, you're not alone in this feeling, and things can get better. Take care of yourself, and remember to be kind to yourself.",
    "Hi there! I'm so sorry to hear that you're feeling lost and struggling with manic depression. It's important to remember that you're not alone and that there are many resources available to help you cope with these challenges. First of all, it's important to acknowledge that you've made progress in managing your symptoms with medication. That's a huge accomplishment, and it shows that you're willing to do what it takes to take care of yourself. Art therapy can be a great way to explore your emotions and find new ways of expressing yourself. It's not a replacement for medication or other forms of therapy, but it can be a helpful addition to your treatment plan. One thing that might be helpful is to talk to a therapist or counselor about your feelings of lost identity and lack of purpose. They can help you explore ways of finding meaning and fulfillment in your life, even if you're not feeling fully 'back to normal' yet. In the meantime, here are some things that might help you cope with your symptoms:1. Practice self-care: Make sure you're getting enough sleep, eating healthy foods, and taking time to relax and unwind each day.2. Stay connected with friends and family: Social support can be really important when you're feeling down or struggling with mental health issues.3. Try to find activities that bring you joy: Even if you're not feeling fully 'back to normal' yet, it can be helpful to find things that make you feel good and give you a sense of purpose 4. Consider seeking support from a mental health professional: They can help you develop coping strategies and provide support as you work through your challenges. I hope these suggestions are helpful. Remember, you don't have to go through this alone.There are many resources available to help you cope with manic depression and find a more fulfilling life.",
    "hi there, and thank you for your question. it sounds like you are struggling with some feelings of sadness and worthlessness. It can be very difficult to get out of these feelings, and sometimes it takes some work and support to move forward. if you are struggling with these feelings, you may want to consider seeking help from a mental health professional, such as a therapist or counselor. They can help you explore some of the underlying causes of your feelings and work with you to develop strategies to help you cope with them. in addition to seeking help from a mental health professional, there are some things that you can try on your own to help you feel better. One of the things that can be helpful is to focus on doing things that you enjoy and that make you feel good. This can help you feel more connected to yourself and to the world around you. It can also be helpful to try to connect with other people and to do things that you can do together. This can help you feel more connected to others and to feel less isolated. Trying to focus on the things that you can control and doing things that you enjoy can help you feel more empowered and more positive about yourself. I hope this helps. If you need more help, please don't hesitate to ask. best of luck to you!",
    "Hello, and thank you for your question. It sounds like your wife and mother are having some tension between them, and it would be best to have a conversation with them both about this. It may be helpful to have a neutral person present in the conversation to help facilitate and ensure that both of them are heard and understood. It may also be helpful to have some specific examples of the disagreements that are occurring and what is causing them. It may be that there are some underlying issues that are contributing to the tension between them, and it would be best to address those as well. I hope this helps, and I wish you all the best in resolving this situation.",
    "Hi there! I'm so sorry to hear that you're feeling that way. It's important to remember that you are deserving of love and friendship, regardless of your perceived flaws or past experiences. It's understandable to feel self doubt and insecurity, but it's important to challenge those thoughts and try to focus on the positive aspects of yourself and your relationships. It might be helpful to try to identify the sources of your self-doubt and work on addressing them. For example, if you feel like you're not good enough for someone, try to think about all the ways that you are a valuable and important person. If you feel like you're not making friends because of who you are, try to think about all the ways that you connect with others and share common interests. It's also important to remember that it's okay to have flaws and make mistakes. Everyone does! It's important to try to be kind to yourself and to focus on your strengths rather than your weaknesses. If you're feeling really struggling with these feelings, it might be helpful to talk to a therapist or counselor. They can help you work through these feelings and develop more positive self-talk and coping strategies. Remember, you are deserving of love and friendship, and it's okay to take time to work on your own self-esteem and self-worth. You are worth it!"
]

# Function to calculate BLEU score
def calculate_bleu_score(references, generated_responses):
    return corpus_bleu(references, generated_responses)

# Function to calculate ROUGE scores
def calculate_rouge_scores(references, generated_responses):
    # Flatten the nested lists and join the strings
    flat_references = [' '.join(sublist) for sublist in references]
    flat_generated_responses = [' '.join(sublist) for sublist in generated_responses]

    # Checking if each reference and generated response is a single string
    flat_references = ' '.join(flat_references)
    flat_generated_responses = ' '.join(flat_generated_responses)

    scorer = rouge_scorer.RougeScorer(['rouge1', 'rouge2', 'rougeL'], use_stemmer=True)
    rouge_scores = scorer.score(flat_references, flat_generated_responses)
    return rouge_scores


# Calculate evaluation metrics
bleu_score = calculate_bleu_score(references, generated_responses)
rouge_scores = calculate_rouge_scores(references, generated_responses)

# Print the evaluation metrics
print(f"BLEU Score (FT-Llama2): {bleu_score}")
print(f"ROUGE Scores (FT-Llama2): {rouge_scores}")
